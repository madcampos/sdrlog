const g="https://madcampos.dev/sdrlog/assets/en-US-0dd214f6.json",i="https://madcampos.dev/sdrlog/assets/fr-FR-6309de41.json",u="https://madcampos.dev/sdrlog/assets/fr-FR-6309de41.json";let r=new Map;class s{static get defaultLocale(){return new Intl.Locale("en-US")}static get availableLocales(){return[new Intl.Locale("en-US"),new Intl.Locale("pt-BR"),new Intl.Locale("fr-FR")]}static get availableTranslations(){return{"en-US":g,"pt-BR":i,"fr-FR":u}}static getMatchingLocale(n){return s.availableLocales.find(t=>t.language===n.language)??s.defaultLocale}static#a(n){return[...n].map(a=>{const e=Math.floor(Math.random()*2);return a.repeat(e)}).map(a=>{const t=["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈́","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"];return a+t[Math.floor(Math.random()*t.length)]}).join("")}static#t(n){return n.replaceAll(/\$t\{(.+?)\}/gu,(a,t)=>s.t([t]))}static getLanguage(){return localStorage.getItem("app-language")??navigator.language}static async setLanguage(n){const a=new Intl.Locale(n),t=s.getMatchingLocale(a),e=`${t.language}-${t.region}`;document.querySelector("html").lang=e,localStorage.setItem("app-language",e);try{const l=s.availableTranslations[e],c=await(await fetch(l)).json();r=new Map(Object.entries(c))}catch{r=new Map}}static t(n){const[a]=n;return r.get(a)||s.#a(a)}static translateTemplate(n){const a=e=>{if(e.nodeType===Node.TEXT_NODE&&(e.textContent=s.#t(e.textContent??"")),e.nodeType===Node.ELEMENT_NODE){const{attributes:l}=e;for(const o of[...l])o.value=s.#t(o.value)}e.hasChildNodes()&&e.childNodes.forEach(l=>{a(l)})},t=n.cloneNode(!0);return a(t),t}}export{s as I18n};
